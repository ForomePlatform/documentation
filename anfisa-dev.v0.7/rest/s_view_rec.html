

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>View Record structure &#8212; Anfisa Development&amp;Installation Documentation v.0.7 documentation</title>
    <link rel="stylesheet" href="../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Condition descriptor" href="s_condition.html" />
    <link rel="prev" title="Dataset document descriptor" href="s_doc_descr.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="s_condition.html" title="Condition descriptor"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="s_doc_descr.html" title="Dataset document descriptor"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Anfisa Development&amp;Installation Documentation v.0.7 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Anfisa REST API</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">View Record structure</a><ul>
<li><a class="reference internal" href="#format">Format</a></li>
<li><a class="reference internal" href="#description">Description</a></li>
<li><a class="reference internal" href="#markup-details">Markup details</a></li>
<li><a class="reference internal" href="#dynamic-features-in-aspects">Dynamic features in aspects</a><ul>
<li><a class="reference internal" href="#aspect-general">Aspect General</a></li>
<li><a class="reference internal" href="#aspect-transcripts">Aspect Transcripts</a></li>
<li><a class="reference internal" href="#aspect-cohorts">Aspect Cohorts</a></li>
<li><a class="reference internal" href="#aspect-quality">Aspect Quality</a></li>
</ul>
</li>
<li><a class="reference internal" href="#used-in-requests">Used in requests</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="s_doc_descr.html"
                        title="previous chapter">Dataset document descriptor</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="s_condition.html"
                        title="next chapter">Condition descriptor</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/rest/s_view_rec.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="view-record-structure">
<h1>View Record structure<a class="headerlink" href="#view-record-structure" title="Permalink to this headline">¶</a></h1>
<div class="section" id="format">
<span id="index-0"></span><h2>Format<a class="headerlink" href="#format" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">[</span></code> <em>list</em> of aspect descriptors</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">{</span></code> <em>dictionary</em>,</div>
<div class="line-block">
<div class="line"><em>aspect descriptor common properties</em>:</div>
<div class="line">————————————–</div>
<div class="line">“<strong>name</strong>”:     aspect name, <em>string</em></div>
<div class="line">“<strong>title</strong>:     title, <em>string</em></div>
<div class="line">“<strong>kind</strong>”:     kind, <em>either</em> <code class="docutils literal notranslate"><span class="pre">&quot;norm&quot;</span></code> <em>or</em> <code class="docutils literal notranslate"><span class="pre">&quot;tech&quot;</span></code></div>
<div class="line">“<strong>type</strong>”:     type, <em>either</em> <code class="docutils literal notranslate"><span class="pre">&quot;table&quot;</span></code> <em>or</em> <code class="docutils literal notranslate"><span class="pre">&quot;pre&quot;</span></code></div>
<div class="line"><br /></div>
<div class="line"><em>in case of</em> <code class="docutils literal notranslate"><span class="pre">type=&quot;table&quot;</span></code>:</div>
<div class="line">———————————</div>
<div class="line">“<strong>columns</strong>”:  column count, <em>int</em></div>
<div class="line">“<strong>colhead</strong>”:  <code class="docutils literal notranslate"><span class="pre">null</span></code> or</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">[</span></code> <em>list</em> of column groups, to represent heading row if the table</div>
<div class="line-block">
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">[</span></code></div>
<div class="line-block">
<div class="line-block">
<div class="line"><strong>[0]</strong>: title (html-escaped), <em>string</em></div>
<div class="line"><strong>[1]</strong>: count, <em>int</em></div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">]</span></code>, …</div>
</div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">]</span></code></div>
</div>
</div>
<div class="line"><strong>colgroup</strong>: <code class="docutils literal notranslate"><span class="pre">null</span></code> or <em>optional</em></div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">[</span></code> <em>list</em> of class names of columns, <em>strings</em> <code class="docutils literal notranslate"><span class="pre">]</span></code></div>
</div>
</div>
</div>
</div>
<div class="line-block">
<div class="line-block">
<div class="line-block">
<div class="line">“<strong>rows</strong>”:    <em>empty</em> or</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">[</span></code> <em>list</em> of attribute descriptors, to represent main content of the table</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">{</span></code></div>
<div class="line-block">
<div class="line-block">
<div class="line">“<strong>name</strong>”: attribute name (technical), <em>string</em></div>
<div class="line">“<strong>title</strong>”: attribute title</div>
<div class="line">“<strong>cells</strong>”:</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">[</span></code>  <em>list</em> of cell descriptors</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">[</span></code></div>
<div class="line-block">
<div class="line"><strong>[0]</strong>: content (html-escaped), <em>string</em></div>
<div class="line"><strong>[1]</strong>: cell render class name, <em>string</em></div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">]</span></code></div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">]</span></code>, …</div>
</div>
<div class="line">“<strong>tooltip</strong>”: tooltip, <strong>string</strong> or <code class="docutils literal notranslate"><span class="pre">undefined</span></code></div>
<div class="line">“<strong>render</strong>”: render mode, <strong>string</strong> or <code class="docutils literal notranslate"><span class="pre">undefined</span></code></div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">]</span></code>, …</div>
</div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">]</span></code></div>
</div>
<div class="line">“<strong>parcontrol</strong>”:  to represent control &lt;div&gt; before the table,</div>
<div class="line-block">
<div class="line"><strong>string</strong> or <code class="docutils literal notranslate"><span class="pre">undefined</span></code></div>
</div>
<div class="line">“<strong>parmodes</strong>”: technical json information on parcontrol modes,</div>
<div class="line-block">
<div class="line"><strong>list of JSON objects</strong> or <code class="docutils literal notranslate"><span class="pre">undefined</span></code></div>
<div class="line"><br /></div>
</div>
<div class="line"><em>in case of</em> <code class="docutils literal notranslate"><span class="pre">type=&quot;pre&quot;</span></code>:</div>
<div class="line">———————————</div>
<div class="line">“<strong>content</strong>”:  pre-formatted content (VCF record), <em>string</em></div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">}</span></code>, …</div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">]</span></code></div>
</div>
</div>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>The data structure represents complete information sufficient for render full presentation of a variant in <a class="reference internal" href="../glossary.html#term-viewing-regime"><span class="xref std std-term">Viewing regime</span></a>. See also <a class="reference internal" href="../concepts/view.html"><span class="doc">Viewing regimes</span></a></p>
<p>Full information is split onto series of <a class="reference internal" href="../glossary.html#term-aspect"><span class="xref std std-term">aspects</span></a>. Aspect usually has form of table. In simple cases table contains two columns, for title and contents of properties. One special aspect represents raw data in VCF format, so has form of pre-formatted text.</p>
<p>It is supposed that technical aspects (kind=”tech”) contain information in more raw form and are useful for deep studies.</p>
<p>Table aspect information is prepared for rendering tables in HTML. Information is split onto rows with fixed length. Left column is control one and contains property titles. Minimal column count is 1, it means one column for titles and one for values.</p>
<p>For complex aspect tables column structure can contain groups of columns with common title.</p>
<p>Row can have tooltip.</p>
</div>
<div class="section" id="markup-details">
<h2>Markup details<a class="headerlink" href="#markup-details" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Aspect VCF represents data in pre-formatted text form with use of &lt;pre&gt; tag.</p>
</li>
<li><p class="first">Most part of aspects represent data by <code class="docutils literal notranslate"><span class="pre">&lt;table&gt;</span></code> with two columns with title and value of property. Only <strong>columns</strong> and <strong>rows</strong> in aspect descriptor properties are sufficient to support this kind of aspects.</p>
</li>
<li><p class="first">Some aspect (currently Transcripts, Quality,Colocated Variants, Cohorts and VEP Transcripts) represent data in a multi-column form, so the following additional properties are supported (see more details about concrete aspects below):</p>
<blockquote>
<div><ul class="simple">
<li><strong>colhead</strong> is used when columns are logically grouped; the property represents header row with joined cells, each cell corresponds to a group of columns. Content of cell consists of title of group, column counter and possibly additional blocks (&lt;span&gt;) for UI controls placement</li>
<li><strong>parcontrol</strong> is used when control information can not be put inside the table, the property  represents a block of document (&lt;div&gt;) above the table and containing blocks for UI controls placement</li>
<li><strong>colgroup</strong> represents &lt;colgroup&gt; tag of the table; it is used when there is need in multiple regimes of columns collapse for the user needs (contemporary browsers do not support collapse of whole columns properly, however &lt;colgroup&gt; tag is the proper place to report information on column base)</li>
</ul>
</div></blockquote>
</li>
</ul>
<p>Cells in tables are marked by specific CSS classes:</p>
<ul class="simple">
<li>title cells (in title column and in title row) are marked by class <code class="docutils literal notranslate"><span class="pre">title</span></code></li>
<li>value cells with no value are marked by class <code class="docutils literal notranslate"><span class="pre">none</span></code></li>
<li>other value cells are marked by class <code class="docutils literal notranslate"><span class="pre">norm</span></code></li>
<li>in case of logically selected column the class <code class="docutils literal notranslate"><span class="pre">hit</span></code> is added to all cells in the column</li>
</ul>
</div>
<div class="section" id="dynamic-features-in-aspects">
<span id="dynamic-aspects-features"></span><h2>Dynamic features in aspects<a class="headerlink" href="#dynamic-features-in-aspects" title="Permalink to this headline">¶</a></h2>
<p>The following is explication of date rendering features that depend on current state of the user session.</p>
<div class="section" id="aspect-general">
<h3>Aspect General<a class="headerlink" href="#aspect-general" title="Permalink to this headline">¶</a></h3>
<p>Contents of aspect can be changed as a result of user activity :</p>
<ul>
<li><p class="first">In in context of <a class="reference internal" href="../glossary.html#term-ws-dataset"><span class="xref std std-term">WS-dataset</span></a>:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="first docutils">
<dt>Rows “Presence in filters” and “Presence in decision trees” contain</dt>
<dd>operative information what <a class="reference internal" href="../glossary.html#term-filter"><span class="xref std std-term">filters</span></a> and
<a class="reference internal" href="../glossary.html#term-decision-tree"><span class="xref std std-term">decision trees</span></a> are positive on the variant in view</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Row “Transcripts” contain <a class="reference internal" href="../glossary.html#term-transcript"><span class="xref std std-term">transcript</span></a> short descriptions, and the variants</dt>
<dd>selected by current filter are marked by <code class="docutils literal notranslate"><span class="pre">hit</span></code> CSS class.</dd>
</dl>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Row “Has_Variant” reports list of samples containing current variant. If some samples are active in context of current filter or decision tree condition, presence of these samples is highlighted and grouped on top of report list.</p>
</li>
</ul>
</div>
<div class="section" id="aspect-transcripts">
<h3>Aspect Transcripts<a class="headerlink" href="#aspect-transcripts" title="Permalink to this headline">¶</a></h3>
<p>The aspect visualizes <a class="reference internal" href="../glossary.html#term-transcript"><span class="xref std std-term">transcripts</span></a> data, and transcripts are subjects of filtering, so rendering of this aspect actively interacts with the user interface in  context of <a class="reference internal" href="../glossary.html#term-ws-dataset"><span class="xref std std-term">WS-dataset</span></a>.</p>
<p>Transcript columns are grouped, so <strong>colhead</strong> property is used in the aspect descriptor. Only transcripts of the first group can be selected in context of <a class="reference internal" href="../glossary.html#term-ws-dataset"><span class="xref std std-term">WS-dataset</span></a>.</p>
<p>In practice the users often need to hide unselected (non hit) columns to have more informative
view of the selected (hit) transcripts and their data.</p>
<p>So all cells in hit columns are marked with CSS class <code class="docutils literal notranslate"><span class="pre">hit</span></code>, and all others with class <code class="docutils literal notranslate"><span class="pre">no-hit</span></code>.</p>
<p>Header cell for the group contains title and column counter as well as empty <code class="docutils literal notranslate"><span class="pre">&lt;span</span> <span class="pre">id=&quot;tr-hit-span&quot;&gt;</span></code>. So the Front End application can fill this span with controls to provide functionality of collapse/expansion of columns in the table.</p>
</div>
<div class="section" id="aspect-cohorts">
<h3>Aspect Cohorts<a class="headerlink" href="#aspect-cohorts" title="Permalink to this headline">¶</a></h3>
<p>The aspect Cohorts is special one and appears only for special datasets with
cohorts of patients and no exact proband sample. The appearance of cohorts in dataset affects behavior of Quality aspect.</p>
</div>
<div class="section" id="aspect-quality">
<h3>Aspect Quality<a class="headerlink" href="#aspect-quality" title="Permalink to this headline">¶</a></h3>
<p>The aspect Quality possess samples as column objects, so there can be two variants of dynamical behavior actual for the user:</p>
<ul class="simple">
<li>If some samples are  <a class="reference internal" href="reccnt.html#active-samples"><span class="std std-ref">active</span></a> in context of current filter or decision tree condition, these samples are highlighted; if there are more than 3 samples in case, the user should have possibility to collapse unselected columns.</li>
<li>If cohorts present in the dataset, the user should have possibility to collapse/open samples from each cohort in a separated way.</li>
</ul>
<p>To support this functionality the following features are used in aspect descriptor, so Front End application can fill these spans with controls to perform dynamical behavior of collapse/restore unnecessary columns by up to two ways:</p>
<ul>
<li><p class="first">Property <strong>parcontrol</strong> is used:</p>
<blockquote>
<div><ul class="simple">
<li>in case of presence current samples selection (and more than 3 samples in case) it contains <code class="docutils literal notranslate"><span class="pre">&lt;span</span> <span class="pre">id=&quot;act-samples-ctrl&quot;&gt;</span></code> with counter of samples as initial contents</li>
<li>in case of cohorts presence, it contains empty <code class="docutils literal notranslate"><span class="pre">&lt;span</span> <span class="pre">id=&quot;cohorts-ctrl&quot;&gt;</span></code></li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Property <strong>colgroup</strong> is used to mark columns by CCS classes: <code class="docutils literal notranslate"><span class="pre">no-hit</span></code> for inactiv samples  and <code class="docutils literal notranslate"><span class="pre">cohort-&lt;cohort</span> <span class="pre">name&gt;</span></code> for marking samples from different cohorts.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="used-in-requests">
<h2>Used in requests<a class="headerlink" href="#used-in-requests" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="reccnt.html"><span class="doc">reccnt</span></a></p>
<p><a class="reference internal" href="single_cnt.html"><span class="doc">single_cnt</span></a></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="s_condition.html" title="Condition descriptor"
             >next</a> |</li>
        <li class="right" >
          <a href="s_doc_descr.html" title="Dataset document descriptor"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Anfisa Development&amp;Installation Documentation v.0.7 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Anfisa REST API</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright Copyright (c) 2019-2022. Partners HealthCare and other members of Forome Association.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.4.
    </div>
  </body>
</html>