

<!doctype html>

<html lang="English">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Filtering regime &#8212; Anfisa Development&amp;Installation Documentation v.0.7 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bizstyle.css" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Variety and panel filtering complex" href="variety.html" />
    <link rel="prev" title="Documentation work page" href="doc_pg.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="variety.html" title="Variety and panel filtering complex"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="doc_pg.html" title="Documentation work page"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Anfisa Development&amp;Installation Documentation v.0.7 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Anfisa Interface concepts</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Filtering regime</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="filtering-regime">
<h1>Filtering regime<a class="headerlink" href="#filtering-regime" title="Permalink to this heading">¶</a></h1>
<section id="user-logic">
<h2>User logic<a class="headerlink" href="#user-logic" title="Permalink to this heading">¶</a></h2>
<p>Filtering regime is supported in main <a class="reference internal" href="../glossary.html#term-Dataset"><span class="xref std std-term">dataset</span></a> pages:</p>
<ul class="simple">
<li><p>for <a class="reference internal" href="../glossary.html#term-Workspace"><span class="xref std std-term">workspaces</span></a> in <a class="reference internal" href="ws_pg.html"><span class="doc">Workspace page</span></a></p></li>
<li><p>for <a class="reference internal" href="../glossary.html#term-XL-dataset"><span class="xref std std-term">XL-datasets</span></a> in <a class="reference internal" href="xl_pg.html"><span class="doc">XL-dataset work page</span></a>.</p></li>
</ul>
<p>The principal scenario of this regime is to build <a class="reference internal" href="../glossary.html#term-Filter"><span class="xref std std-term">filter</span></a>, i.e. sequence of <a class="reference internal" href="../glossary.html#term-Conditions"><span class="xref std std-term">conditions</span></a>.</p>
<p>The principal feature of the regime is as follows:</p>
<blockquote>
<div><p>On each stage the user has complete information for all filtering properties values distributions.</p>
</div></blockquote>
<p>This feature is complex one and rather heavy to support, however it is very important part of functionality, since it essentially helps the user in understanding what is happening in current selection and in keeping control over the filtering procedure.</p>
<p>In simple scenario the user adds conditions to filter one by one in an interactive way, and the user interface can guarantee that the resulting filter is built is consistent, i.e. it select nonempty set of <a class="reference internal" href="../glossary.html#term-Variant"><span class="xref std std-term">variants</span></a>.</p>
<p>Also the user can modify (update) conditions in sequence, and under these circumstances there can not be a guaranty in keeping filter consistent. So the user needs to do this updates more responsively.</p>
<p>The regime uses <a class="reference internal" href="status_report.html"><span class="doc">Status report mechanism (with delays)</span></a>. It is critical in case of large dataset, since the user can work with data without long delays, in situation where the complete list of results of required data evaluations take long time.</p>
</section>
<section id="interface-logic">
<h2>Interface logic<a class="headerlink" href="#interface-logic" title="Permalink to this heading">¶</a></h2>
<p>Here is discussion of user interface requirements for the filtering regime.</p>
<section id="control-areas">
<h3>Control areas<a class="headerlink" href="#control-areas" title="Permalink to this heading">¶</a></h3>
<p>There are 4 areas on filtering panel:</p>
<ul>
<li><p>Units (filtering properties) area</p>
<blockquote>
<div><p>The area is split onto blocks representing one <a class="reference internal" href="../glossary.html#term-Filtering-property"><span class="xref std std-term">filtering property</span></a> or <a class="reference internal" href="../glossary.html#term-Filtering-function"><span class="xref std std-term">filtering function</span></a>. Blocks are grouped thematically with common title for group.</p>
<p>Filtering property block is being rendered with name, title(optional), and information of values distribution from property status descriptor (see <a class="reference internal" href="../rest/s_prop_stat.html"><span class="doc">Property Status structure</span></a>). It is visible if property status is incomplete.</p>
</div></blockquote>
</li>
<li><p>Current condition area</p>
<blockquote>
<div><p>This area is used for create or update condition for a filtering property and function. It looks and behave different for different kind of filtering property or function: for numeric properties it is small, for enumerated ones it contains possibly large control for variants of values, for functions it might be even more wide if parameter settings are complex.</p>
</div></blockquote>
</li>
<li><p>Conditions area</p>
<blockquote>
<div><p>Split on blocks for each condition in current filter. Empty if current filter is empty.</p>
</div></blockquote>
</li>
<li><p>Naming area</p>
<blockquote>
<div><p>The area needs to support load, create, update and delete named filters (see <a class="reference internal" href="sol_work.html"><span class="doc">Solution items in work</span></a> for details)</p>
</div></blockquote>
</li>
</ul>
</section>
<section id="not-ready-controls">
<h3>Not-ready controls<a class="headerlink" href="#not-ready-controls" title="Permalink to this heading">¶</a></h3>
<p>There are controls needed to work out various not-ready situations:</p>
<ul>
<li><p>Shadow for the whole Units area</p>
<blockquote>
<div><p>In use until request <a class="reference internal" href="../rest/ds_stat.html"><span class="doc">ds_stat</span></a> is not complete. The user sees some shadowed previous content of the area but the interface is not responsible for it. (It is possible to clear the area, but it might be uncomfortable for the user)</p>
</div></blockquote>
</li>
<li><p>State &quot;Loading information...&quot; for Current condition area</p>
<blockquote>
<div><p>In use until the client is waiting for status report of the current property.</p>
</div></blockquote>
</li>
<li><p>Shadow for list of values for current filtering function.</p>
<blockquote>
<div><p>In use until request <a class="reference internal" href="../rest/statfunc.html"><span class="doc">statfunc</span></a> is not complete.</p>
</div></blockquote>
</li>
</ul>
<p>All these features are important only in case of <a class="reference internal" href="../glossary.html#term-XL-dataset"><span class="xref std std-term">XL-datasets</span></a> where request evaluation might take long time.</p>
<section id="technical-details">
<h4>Technical details<a class="headerlink" href="#technical-details" title="Permalink to this heading">¶</a></h4>
</section>
</section>
<section id="priority-of-properties-in-status-report-mechanism">
<h3>Priority of properties in status report mechanism<a class="headerlink" href="#priority-of-properties-in-status-report-mechanism" title="Permalink to this heading">¶</a></h3>
<blockquote>
<div><p>Priority of properties can be controlled in request <a class="reference internal" href="../rest/statunits.html"><span class="doc">statunits</span></a> by reordering items in <strong>units</strong> argument. If the user clicks on some property, it should be loaded with top priority. Next priority have properties that are visible by the user (if the user can scroll Units area). All other properties might be loaded later.</p>
</div></blockquote>
</section>
<section id="current-selection">
<h3>Current selection<a class="headerlink" href="#current-selection" title="Permalink to this heading">¶</a></h3>
<p>Current selection in filtering panel is a synchronized complex of selections:</p>
<ul class="simple">
<li><p>filtering property in Current Condition area</p></li>
<li><p>the same filtering property is selected in Units area</p></li>
<li><p>if Conditions area contain conditions using the same filtering property, one of them is selected; otherwise selection in Conditions area is empty</p></li>
</ul>
<p>To change selection the user can pick units (filtering properties) as well as conditions. If unit is selected, the first condition with this property should be selected automatically.</p>
<p>There is essential difference in setting up Current Condition area by a property without existing condition, or by existing condition. In the first case the interface can use status property descriptors to guarantee nonempty result of condition being created, otherwise only update logic is possible without any guarantee.</p>
<p>If the user selects a filtering property, and the client does not have its status descriptor yet, the Current Condition area needs to keep state &quot;Loading information...&quot; until the request <a class="reference internal" href="../rest/statunits.html"><span class="doc">statunits</span></a> with the required descriptor is being completed.</p>
</section>
<section id="enumerated-properties-in-current-condition-area">
<h3>Enumerated properties in Current Condition area<a class="headerlink" href="#enumerated-properties-in-current-condition-area" title="Permalink to this heading">¶</a></h3>
<blockquote>
<div><p>(see <a class="reference internal" href="../rest/s_condition.html"><span class="doc">Condition descriptor</span></a>)</p>
</div></blockquote>
<ul>
<li><p>Join mode. There are 3 possible variant of join mode for enumerated condition:</p>
<blockquote>
<div><p>join mode: <code class="docutils literal notranslate"><span class="pre">&quot;OR&quot;</span></code> <em>or</em> <code class="docutils literal notranslate"><span class="pre">&quot;AND&quot;</span></code> <em>or</em> <code class="docutils literal notranslate"><span class="pre">&quot;NOT&quot;</span></code></p>
<p>Mode <code class="docutils literal notranslate"><span class="pre">&quot;OR&quot;</span></code> is common for most part of conditions, it needs to be either pre selected or even hidden to choice.</p>
<p>Note also that in case of <a class="reference internal" href="../glossary.html#term-Status-property"><span class="xref std std-term">status property</span></a> operation AND is out of sense.</p>
</div></blockquote>
</li>
<li><p>Values with zero counts. There can be many variants in list of values that are absent in current filtering selection, and property status descriptor contains these values with zero counts. These values should be hidden for the user in normal situation.</p>
<blockquote>
<div><p>But in case where condition over property uses these values, they needs to be visible. So checkbox &quot;Show zeros&quot; needs to be provided in the user interface to resolve this coincidence.</p>
<p>One more problem: condition might use variant of value that does not present in property status descriptor at all. To work out this situation accurately these values need to be added to the rendering list of values, with zero counts.</p>
</div></blockquote>
</li>
<li><p>Long lists. Length of value variants can be very long, especially in case of <a class="reference internal" href="../glossary.html#term-XL-dataset"><span class="xref std std-term">XL-datasets</span></a>. It might cause heavy but worthless traffic between the server and client. In future releases we are planning to comlexify API for these cases to provide more effective and useful solution.</p></li>
</ul>
</section>
</section>
<section id="rest-api-requests">
<h2>REST API requests<a class="headerlink" href="#rest-api-requests" title="Permalink to this heading">¶</a></h2>
<p>For support filtering regime:</p>
<ul class="simple">
<li><dl class="simple">
<dt><a class="reference internal" href="../rest/ds_stat.html"><span class="doc">ds_stat</span></a></dt><dd><p>Principal request to support the regime</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><a class="reference internal" href="../rest/statunits.html"><span class="doc">statunits</span></a></dt><dd><p>Delayed evaluations for filtering property status data</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><a class="reference internal" href="../rest/statfunc.html"><span class="doc">statfunc</span></a></dt><dd><p>Function filtering support</p>
</dd>
</dl>
</li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Filtering regime</a><ul>
<li><a class="reference internal" href="#user-logic">User logic</a></li>
<li><a class="reference internal" href="#interface-logic">Interface logic</a><ul>
<li><a class="reference internal" href="#control-areas">Control areas</a></li>
<li><a class="reference internal" href="#not-ready-controls">Not-ready controls</a><ul>
<li><a class="reference internal" href="#technical-details">Technical details</a></li>
</ul>
</li>
<li><a class="reference internal" href="#priority-of-properties-in-status-report-mechanism">Priority of properties in status report mechanism</a></li>
<li><a class="reference internal" href="#current-selection">Current selection</a></li>
<li><a class="reference internal" href="#enumerated-properties-in-current-condition-area">Enumerated properties in Current Condition area</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rest-api-requests">REST API requests</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="doc_pg.html"
                          title="previous chapter">Documentation work page</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="variety.html"
                          title="next chapter">Variety and panel filtering complex</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/concepts/filters_reg.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="variety.html" title="Variety and panel filtering complex"
             >next</a> |</li>
        <li class="right" >
          <a href="doc_pg.html" title="Documentation work page"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Anfisa Development&amp;Installation Documentation v.0.7 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Anfisa Interface concepts</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Filtering regime</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright Copyright (c) 2019-2022. Partners HealthCare and other members of Forome Association.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.1.1.
    </div>
  </body>
</html>