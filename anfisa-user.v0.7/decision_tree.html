
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Decision Tree &#8212; Anfisa User Documentation v.0.7 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/pyramid.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Filter dashboard" href="filter_dashboard.html" />
    <link rel="prev" title="Filter refiner" href="filter_refiner.html" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Neuton&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nobile:regular,italic,bold,bolditalic&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->

  </head><body>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="filter_dashboard.html" title="Filter dashboard"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="filter_refiner.html" title="Filter refiner"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Anfisa User Documentation v.0.7 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Decision Tree</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="decision-tree">
<span id="id1"></span><h1>Decision Tree<a class="headerlink" href="#decision-tree" title="Permalink to this heading">¶</a></h1>
<p>The Decision tree is an advances method of variations filtering.
It allows very powerful and flexible way to refine variations set and create new derives sets.</p>
<section id="how-decision-tree-works">
<h2>How Decision Tree works<a class="headerlink" href="#how-decision-tree-works" title="Permalink to this heading">¶</a></h2>
<p>On the first glance, the Decision Tree is very similar to <strong>Filter Refiner</strong> functionality.
This if a sequence of a filtering steps, each of them filters variation by the specific condition,
or group of conditions.
Each filter separates variations in two groups:</p>
<ul class="simple">
<li><p>Variations which pass filter</p></li>
<li><p>Variations which not pass filter</p></li>
</ul>
<p>However, the <strong>Filter Refiner</strong> has very straightforward hardcoded logic:</p>
<ul class="simple">
<li><p>Variations, <em>not passing</em> the filter are <em>excluded</em> from the analysis</p></li>
<li><p>Variations, <em>passing</em> the filter goes to subsequent filters</p></li>
</ul>
<p>In <strong>Decision tree</strong> we have more flexible options both in variation filtering and in subsequent actions.
The overall logic is following:</p>
<ul class="simple">
<li><p>A Decision Tree consists of a sequence of steps (branching points).</p></li>
<li><p>The process starts with a set consisting of all of the variants from the dataset.</p></li>
<li><p>This set “travels” through a tree trunk.</p></li>
<li><p>Every step is a particular filter or a combination of filters joined by AND/OR
(In decision tree they are referred as <em>attributes</em>).</p></li>
<li><dl class="simple">
<dt>At each step all variations are separated in two groups</dt><dd><ul>
<li><p>Variations, <em>not matching</em> the step criteria goes to subsequent steps.</p></li>
<li><dl class="simple">
<dt>For variations, <em>matching</em> step criteria user can choose one of the following actions:</dt><dd><ul>
<li><p>Unconditionally include variations in the final selection</p></li>
<li><p>Exclude variations from further consideration (thrown away)</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>A result of application of any Decision Tree is a set that we will call “Final selection”.</p>
<p>At the final step of decision tree we can decide what to do with rest of variations:
add in to the final selection or trow away.</p>
<p>In fact, the <strong>Filter Refiner</strong> is just a simple version of a decision tree,
where at each step we exclude variations, not passing the filter,
and on the final step including all variations to final data set.</p>
</section>
<section id="decision-tree-interface-usage">
<h2>Decision tree interface usage<a class="headerlink" href="#decision-tree-interface-usage" title="Permalink to this heading">¶</a></h2>
<p>To start variations filtering by Decision Tree* user should select <strong>Whole genome/exome</strong> and then
<strong>Build inclusion/exclusion criteria</strong> option.
After this, the Decision tree window opens.
Alternatively, user can switch between <strong>Decision tree</strong> and <strong>Filter Refiner</strong> modes
by the combo box, next to Forome logo.</p>
<section id="header-panel">
<h3>Header panel<a class="headerlink" href="#header-panel" title="Permalink to this heading">¶</a></h3>
<p>On the top of the page there is a panel containing controls for working with presets and datasets.
From it user can:
* Select decision tree from the list of pre-defined trees
* <strong>Create a decision tree</strong>  – save current tree as a new preset
* <strong>Text editor</strong> – edit decision tree code
* <strong>Create derived dataset</strong> – apply decision tree to the dataset and save results as a derived dataset.</p>
<p>AnFiSA is distributed together with the set of pre-defined decision trees.
The detailed description of these trees are located in separate section.</p>
</section>
<section id="filters-panel">
<h3>Filters panel<a class="headerlink" href="#filters-panel" title="Permalink to this heading">¶</a></h3>
<p>On the left panel user can see the list of the filters, same as for <strong>Filter Refiner</strong>.</p>
<a class="reference internal image-reference" href="_images/decision-tree.png"><img alt="Decision tree main window" src="_images/decision-tree.png" style="width: 800px;" /></a>
<p>By clicking on the filter user can see the filter properties in the pop-up window.</p>
<a class="reference internal image-reference" href="_images/decision-tree_filter-popup.png"><img alt="Decision tree - filter popup" src="_images/decision-tree_filter-popup.png" style="width: 300px;" /></a>
<p>On the right <strong>Results</strong> panel user can see the current decision tree.
User can select the step by clicking on the step caption.
By default the decision tree contains only one step.</p>
<p>After pressing the <em>Add attribute</em> button the filter is added
to the current step.
Here an <em>Attribute</em> is just one filter in the particular step.</p>
<p>User can add more filters to the same step by clicking on the other filters in the left panel
or by pressing the <strong>Add attribute</strong> button on the <strong>Results</strong> panel (see below).</p>
<p>The filter popup for new filter will looks the same except of action buttons.</p>
<a class="reference internal image-reference" href="_images/decision-tree_add-attribute.png"><img alt="Decision tree - adding new attribute for the tree step" src="_images/decision-tree_add-attribute.png" style="width: 300px;" /></a>
<p>For adding a filter to the step with existing filter one will have the following options:
* Replace – replace current filter in the step to the new one
* Add by joining – add a filter as a new attribute to the step.</p>
<p>In the second case user must select the joining function: OR/AND</p>
</section>
<section id="decision-tree-panel-results">
<h3>Decision tree panel (Results)<a class="headerlink" href="#decision-tree-panel-results" title="Permalink to this heading">¶</a></h3>
<p>The <strong>Results</strong> panel contains active decision tree filters.
Of the first glance it can look complicated, however underlying logic is rather straightforward</p>
<a class="reference internal image-reference" href="_images/decision-tree_results.png"><img alt="Decision tree results" src="_images/decision-tree_results.png" style="width: 800px;" /></a>
<p>On top of the page none can see the statistic on the current decision tree:
Total number of variations, number of accepted and rejected variations,
and two buttons to view results:</p>
<ul class="simple">
<li><p>View returned variations - variations passing decision tree</p></li>
<li><p>View variations - all list of variations</p></li>
</ul>
<p>The <strong>Tree</strong> column shows graphical tree with list of tree steps.
At the each step AnFiSa displays the number of variations before step.
The arrow indicates number of variations which are included ijn the final dataset
(green arrow) or excluded from subsequent analysis (purple arrow).</p>
<p>The <strong>Algorithm</strong> column shows the step details for each step.</p>
<p>The <strong>Include/Exclude</strong> radio buttons define action for variations passing filter:
include into final dataset or exclude from calculation.</p>
<p>The icon “three vertical dots” allows to change decision tree:
* Add steps before/after current
* Negate the step – reverse the final result of step
* Duplicate step
* Split step – separate multi-attribute step to the several independent steps
* Delete step</p>
<p>The left part of step details shows the filters (attributes) with their settings.
The right part contains the same information in form of Python-like language.</p>
<p>The gear icon in the filter allows user to configure the filter parameters.
The configuration window is the same as for adding new filter to the step.
User can save updated filter parameters, cancel changed or remove the filter form the step.</p>
<p>The right part of the step shows the python-like code describing the step.</p>
<p>The “<strong>Add step</strong>” button at the bottom of the tree adds mode step to the decision tree.</p>
<p>The bottom of the tree always occupied by the special step called “<strong>Final Step</strong>”
The only purpose of this step is to decide, what we should do with te rest of variations,
not included/excluded by other filters. Here we have only two possible options:
include these variation to the final dataset, or exclude.</p>
</section>
<section id="code-editor">
<h3>Code editor<a class="headerlink" href="#code-editor" title="Permalink to this heading">¶</a></h3>
<p>User can directory edit the decision tree code by clicking the “Text editor” button on top of the decision tree window.
The code syntax for decision tree is described in <a class="reference internal" href="suppl/dtree_syntax.html#decision-tree-syntax"><span class="std std-ref">Decision tree syntax reference</span></a>.</p>
<a class="reference internal image-reference" href="_images/decision-tree_code-editor.png"><img alt="Decision tree results" src="_images/decision-tree_code-editor.png" style="width: 600px;" /></a>
<p>After clicking the “Save” button decision tree update according to the code changes.
The “Done” button allows to save changes in code without direct updating the decision tree.</p>
<p><strong>Next</strong>: <a class="reference internal" href="filter_dashboard.html#filter-dashboard"><span class="std std-ref">Filter dashboard</span></a></p>
<p><a class="reference internal" href="index.html#toc"><span class="std std-ref">Table of contents</span></a></p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Decision Tree</a><ul>
<li><a class="reference internal" href="#how-decision-tree-works">How Decision Tree works</a></li>
<li><a class="reference internal" href="#decision-tree-interface-usage">Decision tree interface usage</a><ul>
<li><a class="reference internal" href="#header-panel">Header panel</a></li>
<li><a class="reference internal" href="#filters-panel">Filters panel</a></li>
<li><a class="reference internal" href="#decision-tree-panel-results">Decision tree panel (Results)</a></li>
<li><a class="reference internal" href="#code-editor">Code editor</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="filter_refiner.html"
                          title="previous chapter">Filter refiner</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="filter_dashboard.html"
                          title="next chapter">Filter dashboard</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/decision_tree.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="filter_dashboard.html" title="Filter dashboard"
             >next</a> |</li>
        <li class="right" >
          <a href="filter_refiner.html" title="Filter refiner"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Anfisa User Documentation v.0.7 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Decision Tree</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright Copyright (c) 2019-2022. Partners HealthCare and other members of Forome Association.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.1.1.
    </div>
  </body>
</html>